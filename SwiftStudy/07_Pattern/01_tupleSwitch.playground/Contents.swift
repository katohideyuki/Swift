import UIKit

// 7-1 ã‚¿ãƒ—ãƒ«ã¨switchæ–‡

/**
 -----------------------------------------------------------------
 â–  ã‚¿ãƒ—ãƒ«ã‚’caseã§ä½¿ã†ã€‚
 caseç¯€ã®å†…éƒ¨ã ã‘ã§æœ‰åŠ¹ãªå®šæ•°ã€å¤‰æ•°ã‚’å®£è¨€ã§ãã‚‹ã€‚
 -----------------------------------------------------------------
 */

å¤‰æ•°dayãŒæœˆã¨æ—¥ã‹ã‚‰ãªã‚‹æ—¥ä»˜ã‚’è¡¨ã™ã‚¿ãƒ—ãƒ«: do {
    let day = (5, 3)                       // 5æœˆ3æ—¥
    switch day {
        case (1, 1): print("å…ƒæ—¦")
        case (2, 11): print("å»ºå›½è¨˜å¿µæ—¥")
        case (5, 3): print("æ†²æ³•è¨˜å¿µæ—¥")     // å‡ºåŠ›ã•ã‚Œã‚‹
        default: break
    }
}

ã‚ã‚‹ç¯„å›²ã®æ—¥ä»˜ã‚’è¡¨ã™: do {
    let day = (5, 4)
    switch day {
        case (1, 1...5): print("å¹´æœ«å¹´å§‹")
        case (5, 3): print("æ†²æ³•è¨˜å¿µæ—¥")
        case (4, 29), (5, 2...6): print("é€£ä¼‘")
        default: break
    }
}

caseç¯€ã®å†…éƒ¨ã ã‘ã§ä½¿ã†å¤‰æ•°: do {
    let day = (8, 10)
    switch day {
        case (5, 3): print("æ†²æ³•è¨˜å¿µæ—¥")
        case (8, let d): print("day.0ãŒã€Œ8ã€ã§ã‚ã‚Œã°ã€day.1ãŒã©ã‚“ãªå€¤ã§ã‚‚å‡ºåŠ›ã•ã‚Œã‚‹ ğŸ‘‰ \(d)")
        default: break
    }
}

å®šæ•°ã‚’ä½¿ã†å¿…è¦ãŒãªã‘ã‚Œã°ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã§ã‚‚ã‚ˆã„: do {
    let day = (1, 1)
    switch day {
        case (1, _): print("day.0ãŒã€Œ1ã€ã§ã‚ã‚Œã°å‡ºåŠ›ã•ã‚Œã‚‹")        // ã“ã£ã¡ãŒå‡ºåŠ›
        case (2, _): print("day.0ãŒã€Œ2ã€ã§ã‚ã‚Œã°å‡ºåŠ›ã•ã‚Œã‚‹")
        default: break
    }
}

/**
 -----------------------------------------------------------------
 â–  switchæ–‡ã§whereç¯€ã‚’ä½¿ã†
 caseãƒ©ãƒ™ãƒ«ã«æ¡ä»¶ã‚’ã¤ã‘ã‚‹å ´åˆã€ãƒ©ãƒ™ãƒ«ã¨ã€Œ:ã€ã®é–“ã«ã€äºˆç´„å¾Œ`whereã¨æ¡ä»¶`ã‚’è¨˜è¿°ã™ã‚‹ã€‚
 å®šæ•°ã‚„å¤‰æ•°ã‚’ä½¿ã†ãƒ©ãƒ™ãƒ«ã¯ã€åˆ¥ãªãƒ©ãƒ™ãƒ«ã¨åŒºåˆ‡ã£ã¦ä¸¦ã¹ã‚‹éš›ã«åˆ¶ç´„ãŒã‚ã‚‹ã€‚ã©ã®ãƒ©ãƒ™ãƒ«ã®æ¡ä»¶
 ã«ä¸€è‡´ã—ãŸã‹ã«ã‚ˆã£ã¦ã€å®šæ•°ã‚„å¤‰æ•°ãŒå€¤ã‚’æŒãŸãªã„å¯èƒ½æ€§ãŒã‚ã‚‹ã‹ã‚‰ã€‚
 `fallthrough`ã¯ç›´ä¸‹ã®ã‚±ãƒ¼ã‚¹ã®å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã€‚
 -----------------------------------------------------------------
 */

ä¸€æœˆã®ç¬¬äºŒæœˆæ›œæ—¥ãŒæˆäººã®æ—¥ã§ã‚ã‚‹ã‹: do {

    /// æ¸¡ã—ãŸå¹´æœˆæ—¥ã®æ›œæ—¥ã‚’æ•´æ•°ã§è¡¨ã—ã¦è¿”ã™ã€‚æ›œæ—¥ï¼ˆæ—¥æ›œï¼0ã€æœˆæ›œ=1ã€...)
    /// - Parameters:
    ///   - y: å¹´
    ///   - m: æœˆ
    ///   - d: æ—¥
    /// - Returns: æ•´æ•°ã§è¡¨ç¾ã—ãŸæ›œæ—¥
    func dayOfWeek(_ y: Int, _ m: Int, _ d: Int) -> Int{
        // å¤‰æ•°y, mã¯ä»®å¼•æ•°ã¨ã¯åˆ¥ç‰©
        var y = y, m = m
        // 1, 2æœˆã§ã‚ã‚Œã°ã€å‰å¹´ã®13æœˆã€14æœˆã¨ã—ã¦è¨ˆç®—ã™ã‚‹
        if m < 3 { m += 12; y -= 1 }

        let leap = y + y / 4 - y / 100 + y / 400
        return (leap + (13 * m + 8) / 5 + d) % 7
    }
    
    let day = (1, 1)
    switch day {
        case (1, let d) where d >= 8 && d <= 14 && dayOfWeek(2023, 1, d) == 1: print("æˆäººã®æ—¥")
        case (8, _): print("å¤ä¼‘ã¿")
        case (let m, let d) where dayOfWeek(2023, m, d) == 0: print("\(m)/\(d)ã¯æ—¥æ›œæ—¥")        // å‡ºåŠ›
        default: break
    }
    // ã‚¿ãƒ—ãƒ«ã®å…¨ã¦ã®è¦ç´ ã‚’å®šæ•°ã«å‰²ã‚Šå½“ã¦ã‚‹å ´åˆã€ã‚¿ãƒ—ãƒ«ã®å‰ã«letã‚’å®šç¾©ã™ã‚Œã°ã‚ˆã„
    // case let (m, d) where dayOfWeek(2023, m, d) == 0
}

å®šæ•°ã‚„å¤‰æ•°ã‚’ä½¿ã£ãŸå ´åˆã«è¤‡æ•°ã®ãƒ©ãƒ™ãƒ«ã‚’ä½¿ã†å ´åˆã«ã¯æ³¨æ„ãŒå¿…è¦: do {
    ãƒ€ãƒ¡ãªä¾‹: do {
        let t = (1, 2)
        switch t {
                //        case (1, let y), (2, 2): print("\(y)")        // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã€‚(2, 2)ã ã£ãŸå ´åˆã€let y ã®å€¤ãŒä¸æ˜ãªãŸã‚
            case (2, _) : fallthrough
                //        case (let x, 2): print("\(z)")                // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã€‚fallthroughå®Ÿè¡Œå¾Œã€let z ã®å€¤ãŒä¸æ˜ãªãŸã‚
            default: break
        }
    }

    ã‚ˆã„ä¾‹: do {
        for t in [ (5, -1), (6, 8), (16, 10), (7, 7), (25, 14), (10, 9) ] {
            // caseç¯€ã§ä½¿ç”¨ã™ã‚‹å®šæ•°ãƒ»å¤‰æ•°ãŒåŒã˜åå‰ã‹ã¤åŒã˜å‹ã§ã‚ã‚Œã°OK
            switch t {
                case let (x, y) where x == y, let (x, y) where x <= 0 || y <= 0:
                    print("ç•°ãªã‚‹æ­£æ•´æ•°ã®çµ„ã§ã¯ã‚ã‚Šã¾ã›ã‚“(\(x), \(y))")
                case (10, let h), (let h, 10):
                    print("ä¸€æ–¹ãŒ10ã€ã‚‚ã†ä¸€æ–¹ã¯\(h)ã§ã™")
                default: break
            }
        }
    }
}

/**
 -----------------------------------------------------------------
 â–  ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«å‹ã‚’switchæ–‡ã§ä½¿ã†
 ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«å‹ãŒnilä»¥å¤–ã®å€¤ã‚’æŒã¤ã¨ãã«ãƒãƒƒãƒã™ã‚‹ã€‚ãƒãƒƒãƒã—ãŸã‚‰ã€ãã®å¾Œã®whereç¯€
 ã‚„å®Ÿè¡Œæ–‡ã§é–‹ç¤ºæ¼”ç®—å­?ã‚’ä½¿ã‚ãªã„ã§å‚ç…§ã§ãã‚‹ã€‚ã¾ãŸã€nilã«ãƒãƒƒãƒã—ãŸã‚±ãƒ¼ã‚¹ã‚‚è¨˜è¿°ã§ã
 ã‚‹ã€‚ç¯„å›²ã‚’ç¤ºã™ã‚±ãƒ¼ã‚¹ã®å ´åˆã¯`()`ã®å¤–ã«?ã‚’ã¤ã‘ã‚‹ã€‚
 -----------------------------------------------------------------
 */
ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«å‹ã®switchæ–‡: do {
    typealias People = (String, Int?)
    var kinmugi = People("é‡‘éº¦ãã‚“", 25)

    switch kinmugi {
        case let (name, age?) where age >= 18:
            print("\(name), å…è¨±ã¨ã‚Œã‚‹ã‚ˆ")
        case let (name, (15...18)?):
            print("\(name), ã¾ã é«˜æ ¡ç”Ÿã ã­")
        case (let name, nil):
            print("\(name), ãã¿ã¯ä½•æ­³ãªã®ï¼Ÿ")
        default: break
    }
}
